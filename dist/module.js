/*! For license information please see module.js.LICENSE.txt */
define(["d3","react","@grafana/data"],(function(t,e,r){return function(t){var e={};function r(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r(r.s=5)}([function(e,r){e.exports=t},function(t,r){t.exports=e},function(t,e){t.exports=r},function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return o}));var a=r(0);function n(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.containerID=e}var e,r,o;return e=t,(r=[{key:"renderChart",value:function(t,e,r){if(t){a.select("#"+this.containerID).select("svg").remove(),a.select("#"+this.containerID).select(".tooltip").remove();var n=t.parsed_data,o=t.final_positions,l=t.colorPal,c=t.dates,s=this.containerID,u=document.getElementById(this.containerID).offsetWidth,d=document.getElementById(this.containerID).offsetHeight,p=25,f=325,h=150,g=25,y=25,v=u-g-f,m=d-p-h;a.select("#"+s).insert("select","svg").on("change",(function(t){!function(t){w=[0,j=t-1],O.domain(w),I=a.axisRight(O).ticks(t).tickSize(5).tickFormat((function(t){return console.log("d"+t),o[t].org}));var e=a.select("#"+s).transition();for(i in e.select(".yAxis").duration(750).call(I).selectAll(".tick text").call(B,f-25),n)e.select(".org-"+i+s).duration(750).attr("d",a.line().curve(a.curveMonotoneX).x((function(t){return P(t.date)})).y((function(t){return O(t.rank)}))),e.selectAll("circle").duration(750).attr("cx",(function(t){return P(t.date)})).attr("cy",(function(t){return O(t.rank)}))}(a.select(this).property("value"))})).selectAll("option").data([10,9,8,7,6,5,4,3,2,1]).enter().append("option").text((function(t){return t})).attr("value",(function(t){return t})),a.selectAll("select").attr("class","dropdownMenu");var b=v+g+f-120;a.select("#"+s).insert("svg","svg").attr("width",b).attr("height",30).append("text").attr("class","dropdown-text").attr("transform","translate("+b+", 20)").style("text-anchor","end").text("Number of Lines to Display: ");var x=a.select("#"+this.containerID).append("svg").attr("width",v+g+f).attr("height",m+p+h+y).append("g").attr("height",m).attr("transform","translate("+g+","+p+")"),k=a.extent(n[0].data,(function(t){return t.date})),j=r-1,w=[0,j],A=a.timeFormat("%m/%d/%y"),P=a.scaleTime().domain(k).range([0,v]),O=a.scaleLinear().domain(w).range([0,m]),I=a.axisRight(O).ticks(r-1).tickSize(5).tickFormat((function(t){return o[t].org})),_=a.axisBottom(P).tickValues(c).tickSize(5).tickFormat(A);x.append("g").call(I).attr("margin",10).attr("transform","translate("+(v+y)+","+p+")").attr("class","yAxis").selectAll(".tick text").call(B,f-25).attr("transform","translate(10,0)"),x.append("g").call(_).attr("class","axis").attr("transform","translate("+y+","+(m+y+p)+")").selectAll(".tick text").call(B,100).attr("transform","rotate(-60)").style("text-anchor","end"),x.append("text").attr("class","header-text").attr("transform","translate("+(v+g+10)+" ,"+p/4+")").style("text-anchor","start").text(e);var M=a.select("body").append("div").attr("class","tooltip").style("opacity",0);for(i in n)x.append("svg").attr("width",v+y).attr("height",m+y+p).append("g").attr("transform","translate("+y+","+p+")").append("path").attr("class","org-"+i+s).datum(n[i].data).attr("fill","none").attr("stroke",l[i%l.length]).attr("opacity",.5).attr("stroke-width",7).attr("d",a.line().curve(a.curveMonotoneX).x((function(t){return P(t.date)})).y((function(t){return O(t.rank)}))).on("mouseover",(function(t){a.selectAll("path").attr("opacity",.2),a.select(this).attr("opacity",1);var e=a.select(this).attr("class");a.selectAll("circle").each((function(t){var r=a.select(this).attr("class"),n=e===r;a.select(this).attr("opacity",n?1:.2).attr("fill-opacity",n?.9:.2)})),M.transition().duration(200).style("opacity",.9),M.html((function(){return"<b>"+t[0].org+"</b>"})).style("left",a.event.pageX+"px").style("top",a.event.pageY-28+"px")})).on("mouseout",(function(t){M.transition().duration(500).style("opacity",0),a.selectAll("path").attr("opacity",.5),a.selectAll("circle").attr("fill-opacity",.5).attr("opacity",.7)})),x.append("svg").attr("width",v+10+y).attr("height",m+y+p).append("g").attr("transform","translate("+y+","+p+")").selectAll("circle").data(n[i].data).enter().append("circle").attr("class","org-"+i+s).attr("cx",(function(t){return P(t.date)})).attr("cy",(function(t){return O(t.rank)})).attr("fill",l[i%l.length]).attr("fill-opacity",.5).attr("r",10).attr("stroke",l[i%l.length]).attr("opacity",.7).attr("stroke-width",1.5);a.select("body").append("div").attr("class","small-tooltip"),x.selectAll("circle").on("mouseover",(function(t){var e=a.select(this).attr("class");console.log(e),a.selectAll("circle").each((function(t){var r=a.select(this).attr("class"),n=e===r;a.select(this).attr("opacity",n?1:.2).attr("fill-opacity",n?1:.2)})),a.selectAll("path").each((function(t){var r=a.select(this).attr("class"),n=e===r;a.select(this).attr("opacity",n?1:.2)})),M.transition().duration(200).style("opacity",.9),M.html((function(){var e=t.rank+1,r=t.value/1e3,a=r+"bytes";return a=(r/=1e3)<1e3?Math.round(10*r)/10+" KB":(r/=1e3)<1e3?Math.round(10*r)/10+" MB":(r/=1e3)<1e3?Math.round(10*r)/10+" GB":(r/=1e3)<1e3?Math.round(10*r)/10+" TB":Math.round(10*r)/10+" PB","<b>#"+e+": </b>"+t.org+"<br><b>Volume: </b>"+a})).style("left",a.event.pageX+"px").style("top",a.event.pageY-28+"px")})).on("mouseout",(function(t){M.transition().duration(500).style("opacity",0),a.selectAll("circle").attr("fill-opacity",.5).attr("opacity",.7),a.selectAll("path").attr("opacity",.5)}))}function B(t,e){t.each((function(){for(var t,r=a.select(this),n=r.text().split(/\s+/).reverse(),i=[],o=0,l=r.attr("y"),c=parseFloat(r.attr("dy")),s=r.text(null).append("tspan").attr("x",0).attr("y",l).attr("dy",c+"em");t=n.pop();)i.push(t),s.text(i.join(" ")),s.node().getComputedTextLength()>e&&(i.pop(),s.text(i.join(" ")),i=[t],s=r.append("tspan").attr("x",0).attr("y",l).attr("dy",1.1*++o+c+"em").text(t))}))}}}])&&n(e.prototype,r),o&&n(e,o),t}();t.exports=BumpChart}).call(this,r(4)(t))},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,r){"use strict";r.r(e);var a=r(2);var n=function(){return(n=Object.assign||function(t){for(var e,r=1,a=arguments.length;r<a;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};var o=r(1),l=r.n(o);var c=r(3),s=function(t){return Object(o.useEffect)((function(){console.log("rendering");var e=t.panelId,r=new c.a("Chart_"+e);console.log(r),r.renderChart(t.data,t.options.linecount,t.options.headerText)})),l.a.createElement("div",{id:"Chart_"+t.panelId,style:{height:t.height,width:t.width}})};r.d(e,"plugin",(function(){return u}));var u=new a.PanelPlugin((function(t){var e=t.options,r=t.data,a=t.width,o=t.height,c=t.id,u=n({},e),d={};try{d=function(t){var e=[],r=["rgba(223, 79, 79,1)","rgba(88, 223, 79,1)","rgba(79, 145, 223,1)","rgba(223, 79, 168,1)","rgba(223, 155, 79,1)","rgba(79, 223, 192,1)","rgba(138, 79, 223,1)","rgba(166, 223, 79,1)","rgba(147, 50, 55,1)","rgba(50, 147, 142,1)","rgba(59, 147, 50,1)","rgba(94, 50, 147,1)","rgba(147, 78, 50,1)","rgba(50, 81, 147,1)"];for(i in t){org=t[i].target,e[i]={org:org,data:[]};var a=t[i].datapoints;for(j in a)date=a[j][1],value=a[j][0],e[i].data[j]={date:date,value:value,rank:0,orig_index:parseInt(i)}}for(i in e[0].data){var n=[];for(j in e)n[j]=e[j].data[i];n.sort((function(t,e){return e.value-t.value}));for(var o=0;o<n.length;o++)e[n[o].orig_index].data[i].rank=o}for(i in e)for(j in e[i].data)e[i].data[j].org=e[i].org,e[i].data[j].color=r[i%r.length];var l=[];for(i in e){var c=e[i].data[e[i].data.length-1];l[i]={org:c.org,rank:c.rank}}l.sort((function(t,e){return t.rank-e.rank}));var s=[];for(i in e[0].data)s[i]=e[0].data[i].date;var u={parsed_data:e,final_positions:l,colorPal:r,dates:s};return console.log(u),u}(r),console.log(d)}catch(t){console.error("Parsing error : ",t)}return l.a.createElement(s,{height:o,width:a,panelId:c,options:u,data:d})})).setPanelOptions((function(t){return t.addNumberInput({path:"linecount",name:"Number of lines",description:"Number of lines to show",defaultValue:10}).addTextInput({path:"headerText",name:"Axis Header",description:"Axis header display",defaultValue:"Axis header"})}))}])}));
//# sourceMappingURL=module.js.map